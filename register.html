<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Eventify Pro — Participant Registration</title>
  <meta name="description" content="Register as a participant for college events on Eventify Pro" />
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --muted:#98a0b3; --accent:#7dd3fc; --glass:rgba(255,255,255,0.04);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;background:linear-gradient(180deg,#071020 0%,#0f1724 100%);color:#e6eef8;line-height:1.4}
    .container{max-width:980px;margin:32px auto;padding:24px}
    header{display:flex;align-items:center;gap:16px}
    .logo{width:64px;height:64px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#60a5fa);display:flex;align-items:center;justify-content:center;font-weight:700;color:#04263b}
    h1{margin:0;font-size:1.45rem}
    p.lead{color:var(--muted);margin-top:6px}

    .grid{display:grid;grid-template-columns:1fr 360px;gap:20px;margin-top:20px}
    @media(max-width:880px){.grid{grid-template-columns:1fr}}

    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:18px;box-shadow:0 6px 18px rgba(2,6,23,0.6);}

    form .row{display:flex;gap:12px}
    form label{display:block;font-size:0.82rem;margin-bottom:6px;color:var(--muted)}
    .input,select{width:100%;padding:10px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:var(--card);color:inherit;font-size:0.95rem}
    .input[type=file]{padding:8px}
    .muted{font-size:0.85rem;color:var(--muted)}

    .btn{display:inline-block;padding:10px 14px;border-radius:10px;border:none;background:linear-gradient(90deg,#22d3ee,#60a5fa);color:#04263b;font-weight:600;cursor:pointer}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--accent)}

    .side-help{position:sticky;top:24px}
    .ticket{border-radius:10px;padding:12px;background:linear-gradient(90deg, rgba(125,211,252,0.06), rgba(96,165,250,0.03));border:1px dashed rgba(125,211,252,0.12)}
    .small{font-size:0.86rem}

    .success{background:linear-gradient(180deg, rgba(34,197,94,0.12), rgba(34,197,94,0.04));color:#bff3d6;padding:10px;border-radius:8px}

    footer{margin-top:22px;color:var(--muted);font-size:0.85rem;text-align:center}

    /* modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.6);display:none;align-items:center;justify-content:center}
    .modal{width:420px;max-width:92%;background:var(--card);padding:18px;border-radius:12px}
    .modal h3{margin-top:0}

    .field-error{color:#ffb4b4;font-size:0.82rem;margin-top:6px}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">EP</div>
      <div>
        <h1>Eventify Pro — Participant Registration</h1>
        <p class="lead">Quickly register for college events, get your digital ticket, and keep everything organised in one place.</p>
      </div>
    </header>

    <div class="grid">
      <div>
        <section class="card">
          <h2 style="margin-top:0">Register as a Participant</h2>
          <p class="muted">Fill in your details below. This page works offline — your registration is saved to the browser. Connect to a backend (Firebase) later to sync.</p>

          <form id="regForm" autocomplete="off">
            <div style="margin-top:14px">
              <label for="fullname">Full name</label>
              <input id="fullname" class="input" type="text" placeholder="eg. Priya Sharma" required>
              <div id="err-name" class="field-error" style="display:none">Please enter your name.</div>
            </div>

            <div class="row" style="margin-top:12px">
              <div style="flex:1">
                <label for="email">Email</label>
                <input id="email" class="input" type="email" placeholder="name@college.edu" required>
                <div id="err-email" class="field-error" style="display:none">Please enter a valid email.</div>
              </div>
              <div style="width:150px">
                <label for="phone">Phone</label>
                <input id="phone" class="input" type="tel" placeholder="9xxxxxxxxx" pattern="[0-9]{10}" required>
                <div id="err-phone" class="field-error" style="display:none">Enter 10-digit phone number.</div>
              </div>
            </div>

            <div class="row" style="margin-top:12px">
              <div style="flex:1">
                <label for="college">College / Department</label>
                <input id="college" class="input" type="text" placeholder="eg. ABC Engineering College" required>
              </div>
              <div style="width:120px">
                <label for="year">Year</label>
                <select id="year" class="input">
                  <option>1st Year</option>
                  <option>2nd Year</option>
                  <option>3rd Year</option>
                  <option>4th Year</option>
                  <option>Other</option>
                </select>
              </div>
            </div>

            <div style="margin-top:12px">
              <label for="event">Select Event</label>
              <select id="event" class="input">
                <option>Tech Talk — AI & ML</option>
                <option>Code Sprint</option>
                <option>Hackathon</option>
                <option>Debate Competition</option>
                <option>Workshop — Web Dev</option>
              </select>
            </div>

            <div style="margin-top:12px">
              <label for="arrival">Expected arrival</label>
              <input id="arrival" class="input" type="time">
            </div>

            <div style="margin-top:12px">
              <label for="idcard">Upload student ID (optional)</label>
              <input id="idcard" class="input" type="file" accept="image/*,.pdf">
            </div>

            <div style="margin-top:12px;display:flex;align-items:center;gap:10px">
              <input id="agree" type="checkbox" />
              <label for="agree" class="muted">I agree to the event rules and photography consent.</label>
            </div>
            <div id="err-agree" class="field-error" style="display:none">You must agree to the rules to register.</div>

            <div style="margin-top:16px;display:flex;gap:10px;align-items:center">
              <button class="btn" type="submit">Register & Generate Ticket</button>
              <button id="resetBtn" type="button" class="btn secondary">Reset</button>
            </div>
          </form>

          <div id="savedMsg" style="margin-top:14px;display:none" class="success">Registration saved locally. You can print your ticket after submitting.</div>
        </section>

        <section style="margin-top:16px" class="card">
          <h3 style="margin-top:0">How it works</h3>
          <ul class="muted small">
            <li>Form validates on the client and saves participants to browser storage.</li>
            <li>Ticket generates a unique ID you can print.</li>
            <li>To sync with your college backend, integrate Firebase or your preferred API — I can help with that.</li>
          </ul>
        </section>

      </div>

      <aside class="side-help">
        <div class="card ticket">
          <h4 style="margin:0">Event Summary</h4>
          <p class="muted small" style="margin-top:6px">Eventify Pro — College Events platform</p>
          <hr style="border:none;border-top:1px solid rgba(255,255,255,0.03);margin:12px 0">
          <p class="small"><strong>Next big event:</strong><br>Inter-College Hackathon — 26 Oct 2025</p>
          <p class="small"><strong>Venue:</strong><br>Main Auditorium</p>
          <p class="small"><strong>Organiser:</strong><br>Student Activity Cell</p>
          <div style="margin-top:10px;display:flex;gap:8px">
            <button id="viewRegs" class="btn secondary">View Participants</button>
            <button id="exportBtn" class="btn">Export CSV</button>
          </div>
        </div>

        <div class="card" style="margin-top:14px">
          <h4 style="margin:0">Quick Tips</h4>
          <ul class="muted small" style="margin-top:8px">
            <li>Ask participants to carry valid student ID.</li>
            <li>Keep a printed list as backup.</li>
            <li>Use the "Export CSV" button to get submissions.</li>
          </ul>
        </div>
      </aside>
    </div>

    <footer>Made with ❤️ by Eventify Pro • For college events</footer>
  </div>

  <!-- Modal -->
  <div id="modalRoot" class="modal-backdrop">
    <div class="modal" role="dialog" aria-modal="true">
      <h3>Registration successful</h3>
      <div id="ticketCard"></div>
      <div style="margin-top:12px;display:flex;gap:8px">
        <button id="printBtn" class="btn">Print / Save Ticket</button>
        <button id="closeModal" class="btn secondary">Close</button>
      </div>
    </div>
  </div>

  <script>
    // Utilities
    const el = id => document.getElementById(id);
    function uid(){return 'EP-' + Date.now().toString(36) + '-' + Math.random().toString(36).slice(2,8).toUpperCase()}

    // Load participants
    function loadParticipants(){
      try{const raw = localStorage.getItem('eventify_participants'); return raw?JSON.parse(raw):[] }catch(e){return[]}
    }
    function saveParticipants(arr){ localStorage.setItem('eventify_participants', JSON.stringify(arr)) }

    // Form handling
    const form = el('regForm');
    form.addEventListener('submit', e=>{
      e.preventDefault();
      // simple validation
      const name = el('fullname').value.trim();
      const email = el('email').value.trim();
      const phone = el('phone').value.trim();
      const agree = el('agree').checked;
      let ok=true;
      if(!name){ el('err-name').style.display='block'; ok=false } else el('err-name').style.display='none'
      if(!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(email)){ el('err-email').style.display='block'; ok=false } else el('err-email').style.display='none'
      if(!/^[0-9]{10}$/.test(phone)){ el('err-phone').style.display='block'; ok=false } else el('err-phone').style.display='none'
      if(!agree){ el('err-agree').style.display='block'; ok=false } else el('err-agree').style.display='none'

      if(!ok) return;

      const ticketId = uid();
      const participant = {
        id: ticketId,
        name,
        email,
        phone,
        college: el('college').value.trim(),
        year: el('year').value,
        event: el('event').value,
        arrival: el('arrival').value || '',
        time: new Date().toISOString()
      };

      // save to localStorage
      const list = loadParticipants();
      list.push(participant);
      saveParticipants(list);

      el('savedMsg').style.display='block';

      // populate modal
      const ticketCard = el('ticketCard');
      ticketCard.innerHTML = `
        <div style="padding:8px;border-radius:8px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent)">
          <p style="margin:6px 0" class="small"><strong>Ticket ID:</strong> ${participant.id}</p>
          <p style="margin:6px 0"><strong>Name:</strong> ${participant.name}</p>
          <p style="margin:6px 0" class="small"><strong>Event:</strong> ${participant.event} — ${participant.arrival || 'N/A'}</p>
          <p style="margin:6px 0" class="muted small">Saved locally on your browser.</p>
        </div>
      `;

      // show modal
      el('modalRoot').style.display='flex';

      // attach print handler that prints only ticket
      el('printBtn').onclick = ()=>{
        const w = window.open('','_blank');
        w.document.write(`<pre style="font-family:monospace">Eventify Pro\nTicket ID: ${participant.id}\nName: ${participant.name}\nEvent: ${participant.event}\nCollege: ${participant.college}\nTime: ${new Date(participant.time).toLocaleString()}\n</pre>`);
        w.document.close();
        w.print();
      }
    })

    el('closeModal').addEventListener('click', ()=> el('modalRoot').style.display='none')

    el('resetBtn').addEventListener('click', ()=>{
      form.reset();
      el('savedMsg').style.display='none';
      ['err-name','err-email','err-phone','err-agree'].forEach(id=>el(id).style.display='none')
    })

    // View participants
    el('viewRegs').addEventListener('click', ()=>{
      const arr = loadParticipants();
      if(!arr.length){ alert('No participants registered yet.') ; return }
      const w = window.open('','_blank');
      const rows = arr.map(p=>`<tr><td>${p.id}</td><td>${p.name}</td><td>${p.email}</td><td>${p.phone}</td><td>${p.event}</td></tr>`).join('')
      w.document.write(`<table border="1" cellpadding="8" style="border-collapse:collapse"><thead><tr><th>Ticket</th><th>Name</th><th>Email</th><th>Phone</th><th>Event</th></tr></thead><tbody>${rows}</tbody></table>`);
      w.document.close();
    })

    // Export CSV
    el('exportBtn').addEventListener('click', ()=>{
      const arr = loadParticipants();
      if(!arr.length){ alert('No participants to export.') ; return }
      const header = ['TicketID','Name','Email','Phone','College','Year','Event','Arrival','SavedAt'];
      const csv = [header.join(',')].concat(arr.map(p=>[
        p.id, p.name, p.email, p.phone, (p.college||''), (p.year||''), (p.event||''), (p.arrival||''), p.time
      ].map(v=>`"${String(v).replace(/"/g,'""')}"`).join(','))).join('\n');

      const blob = new Blob([csv], {type:'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href=url; a.download='eventify_participants.csv'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    })

  </script>
</body>
</html>
